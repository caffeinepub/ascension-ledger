{
  "kind": "build_request",
  "title": "Add username editing and account deletion to profile page",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Add backend function to update a user's username/nickname with validation to ensure the new username is not empty",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-final"
        ],
        "quotes": [
          "Add a option to edit username in the profile page"
        ]
      },
      "acceptanceCriteria": [
        "Backend function accepts principal and new username as parameters",
        "Function validates that username is not empty",
        "Function updates the player's nickname in the backend state",
        "Function returns success or error result"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Add backend function to delete a user account, removing all associated player data including profile, tasks, missions progress, and stats",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-final"
        ],
        "quotes": [
          "an option to delete the user account in the profile page"
        ]
      },
      "acceptanceCriteria": [
        "Backend function accepts principal as parameter",
        "Function removes all player data from backend state",
        "Function returns confirmation of deletion"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Add username edit interface to the ProfileSettingsPage with an editable input field, save button, and success/error feedback using toast notifications",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-final"
        ],
        "quotes": [
          "Add a option to edit username in the profile page"
        ]
      },
      "acceptanceCriteria": [
        "Profile page displays current username in an editable field",
        "Save button triggers username update via backend mutation",
        "Success toast appears when username is updated successfully",
        "Error toast appears if update fails",
        "Profile data refreshes after successful update"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Add account deletion button to ProfileSettingsPage with confirmation dialog, explaining that this action is permanent and will delete all progress, then logout and redirect to landing page after deletion",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-final"
        ],
        "quotes": [
          "an option to delete the user account in the profile page"
        ]
      },
      "acceptanceCriteria": [
        "Delete account button is prominently displayed on profile page with warning styling",
        "Clicking delete button opens confirmation dialog explaining permanent data loss",
        "Confirmation dialog has cancel and confirm delete buttons",
        "Upon confirmation, account deletion mutation is triggered",
        "After successful deletion, user is logged out and redirected to landing page",
        "Error toast appears if deletion fails"
      ]
    }
  ],
  "constraints": [
    "Username edit must maintain the same validation rules as initial profile setup",
    "Account deletion must be irreversible and remove all user data",
    "Both features must use the existing Internet Identity principal for authentication"
  ],
  "nonGoals": [
    "Username change history tracking",
    "Account recovery or soft deletion",
    "Data export before deletion",
    "Email notifications for account changes"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}